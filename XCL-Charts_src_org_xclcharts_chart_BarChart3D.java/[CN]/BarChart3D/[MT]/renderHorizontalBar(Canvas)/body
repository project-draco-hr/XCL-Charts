{
  List<BarData> chartDataSource=this.getDataSource();
  if (null == chartDataSource)   return false;
  renderHorizontalBarDataAxis(canvas);
  dataAxis.renderAxis(canvas,plotArea.getLeft(),plotArea.getBottom(),plotArea.getRight(),plotArea.getBottom());
  renderHorizontalBarLabelAxis(canvas);
  mBar3D.render3DYAxis(plotArea.getLeft(),plotArea.getTop(),plotArea.getRight(),plotArea.getBottom(),canvas);
  float YSteps=getHorizontalYSteps();
  int barNumber=getDatasetSize(chartDataSource);
  int currNumber=0;
  float[] ret=mBar3D.getBarHeightAndMargin(YSteps,barNumber);
  if (null == ret || ret.length != 2) {
    Log.e(TAG,"????????????????????????.");
    return false;
  }
  float barHeight=ret[0];
  float barInnerMargin=ret[1];
  float labelBarUseHeight=add(mul(barNumber,barHeight),mul((barNumber - 1),barInnerMargin));
  float scrWidth=plotArea.getWidth();
  float valueWidth=(float)dataAxis.getAxisRange();
  for (int i=0; i < barNumber; i++) {
    BarData bd=chartDataSource.get(i);
    List<Double> barValues=bd.getDataSet();
    if (null == barValues)     continue;
    List<Integer> barDataColor=bd.getDataColor();
    int barDefualtColor=bd.getColor();
    mBar3D.getBarPaint().setColor(barDefualtColor);
    for (int j=0; j < barValues.size(); j++) {
      Double bv=barValues.get(j);
      setBarDataColor(mBar3D.getBarPaint(),barDataColor,j,barDefualtColor);
      float ty1=mul((j + 1),YSteps);
      float drawBarButtomY=add(sub(plotArea.getBottom(),ty1),labelBarUseHeight / 2);
      drawBarButtomY=sub(drawBarButtomY,(barHeight + barInnerMargin) * currNumber);
      double tlen=MathHelper.getInstance().sub(bv,dataAxis.getAxisMin());
      float valuePostion=mul(scrWidth,div(dtof(tlen),valueWidth));
      float topY=sub(drawBarButtomY,barHeight);
      float rightX=add(plotArea.getLeft(),valuePostion);
      mBar3D.renderHorizontal3DBar(plotArea.getLeft(),topY,rightX,drawBarButtomY,mBar3D.getBarPaint().getColor(),canvas);
      saveBarRectFRecord(i,j,plotArea.getLeft(),topY,rightX,drawBarButtomY);
      mBar3D.renderBarItemLabel(getFormatterItemLabel(bv),add(plotArea.getLeft(),valuePostion),sub(drawBarButtomY,barHeight / 2),canvas);
    }
    currNumber++;
  }
  plotLegend.renderBarKey(canvas,this.getDataSource());
  return true;
}

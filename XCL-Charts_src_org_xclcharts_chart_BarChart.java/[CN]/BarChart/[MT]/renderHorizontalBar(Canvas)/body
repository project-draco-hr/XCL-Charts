{
  if (null == mDataSet)   return false;
  float YSteps=getHorizontalYSteps();
  float barInitX=plotArea.getLeft();
  float barInitY=plotArea.getBottom();
  int barNumber=getDatasetSize(mDataSet);
  int currNumber=0;
  float[] ret=mFlatBar.getBarHeightAndMargin(YSteps,barNumber);
  if (null == ret || ret.length != 2) {
    Log.e(TAG,"????????????????????????.");
    return false;
  }
  float barHeight=ret[0];
  float barInnerMargin=ret[1];
  float labelBarUseHeight=add(mul(barNumber,barHeight),mul(sub(barNumber,1),barInnerMargin));
  float scrWidth=getAxisScreenWidth();
  float valueWidth=(float)dataAxis.getAxisRange();
  int barDefualtColor=0, vSize=0;
  Double bv=0d;
  for (int i=0; i < barNumber; i++) {
    BarData bd=mDataSet.get(i);
    List<Double> barValues=bd.getDataSet();
    if (null == barValues)     continue;
    List<Integer> barDataColor=bd.getDataColor();
    barDefualtColor=bd.getColor();
    mFlatBar.getBarPaint().setColor(barDefualtColor);
    vSize=barValues.size();
    for (int j=0; j < vSize; j++) {
      bv=barValues.get(j);
      setBarDataColor(mFlatBar.getBarPaint(),barDataColor,j,barDefualtColor);
      float currLableY=sub(barInitY,mul((j + 1),YSteps));
      float drawBarButtomY=add(currLableY,labelBarUseHeight / 2);
      float tw=add(barHeight,barInnerMargin);
      drawBarButtomY=sub(drawBarButtomY,tw * currNumber);
      float drawBarTopY=sub(drawBarButtomY,barHeight);
      double vaxlen=MathHelper.getInstance().sub(bv,dataAxis.getAxisMin());
      float fvper=div(dtof(vaxlen),valueWidth);
      float valuePostion=mul(scrWidth,fvper);
      float rightX=add(barInitX,valuePostion);
      mFlatBar.renderBar(barInitX,drawBarTopY,rightX,drawBarButtomY,canvas);
      saveBarRectFRecord(i,j,barInitX + mMoveX,drawBarTopY + mMoveY,rightX + mMoveX,drawBarButtomY + mMoveY);
      mFlatBar.renderBarItemLabel(getFormatterItemLabel(bv),rightX,sub(drawBarButtomY,barHeight / 2),canvas);
    }
    currNumber++;
  }
  if (null != mCustomLine) {
    mCustomLine.setHorizontalPlot(dataAxis,plotArea,this.getAxisScreenWidth());
    mCustomLine.renderHorizontalCustomlinesDataAxis(canvas);
  }
  return true;
}

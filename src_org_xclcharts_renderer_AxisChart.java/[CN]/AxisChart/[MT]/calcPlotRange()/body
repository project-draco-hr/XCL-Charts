{
  super.calcPlotRange();
  DrawHelper dw=new DrawHelper();
  float perLeft=getPaddingLeft();
  float perRight=getPaddingRight();
  float perBottom=getPaddingBottom();
  float width=getWidth();
  float height=getHeight();
  if (width > height) {
    float scrPer=height / width;
    perBottom+=scrPer;
    perLeft-=scrPer;
    perRight-=scrPer;
  }
  if (perLeft > 0) {
    float rederLeft=Math.round(height / 100 * perLeft);
    if (this.getLegend().getLeftLegend().length() > 0) {
      float legendLength=dw.getPaintFontHeight(getLegend().getLeftLegendPaint());
      if (legendLength > rederLeft)       rederLeft=legendLength;
    }
    plotArea.setLeft(getLeft() + rederLeft);
  }
  if (perRight > 0) {
    float rederRight=Math.round(width / 100 * perRight);
    if (this.getLegend().getRightLegend().length() > 0) {
      float legendLength=dw.getPaintFontHeight(getLegend().getRightLegendPaint());
      if (legendLength > rederRight)       rederRight=legendLength;
    }
    plotArea.setRight(this.getRight() - rederRight);
  }
  if (perBottom > 0) {
    float rederBottom=Math.round(height / 100 * perBottom);
    if (this.getLegend().getLowerLegend().length() > 0) {
      float legendHeight=dw.getPaintFontHeight(getLegend().getLowerLegendPaint());
      if (legendHeight > rederBottom)       rederBottom=legendHeight;
    }
    plotArea.setBottom(this.getBottom() - rederBottom);
  }
}

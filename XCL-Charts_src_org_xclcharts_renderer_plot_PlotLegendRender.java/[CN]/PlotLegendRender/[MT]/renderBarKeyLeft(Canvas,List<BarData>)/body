{
  initEnv();
  mTextHeight=this.getLabelTextHeight();
  mKeyLabelX=mPlotArea.getLeft() + mOffsetX;
  mKeyLabelY=mPlotArea.getTop() - mTextHeight - mOffsetY;
  mRectWidth=this.getRectWidth();
  float rectOffset=getLegendLabelMargin();
  float rectHeight=mTextHeight;
  String key="";
  getLegendLabelPaint().setTextAlign(Align.LEFT);
  for (  BarData cData : dataSet) {
    key=cData.getKey();
    if ("" == key)     continue;
    getLegendLabelPaint().setColor(cData.getColor());
    float strWidth=this.getLabelTextWidth(key);
    if (mKeyLabelX + 2 * mRectWidth + strWidth > mXChart.getRight()) {
      mKeyLabelX=mPlotArea.getLeft();
      mKeyLabelY=mKeyLabelY + rectHeight * 2;
    }
    canvas.drawRect(mKeyLabelX,mKeyLabelY,mKeyLabelX + mRectWidth,mKeyLabelY - rectHeight,getLegendLabelPaint());
    getLegendLabelPaint().setTextAlign(Align.LEFT);
    DrawHelper.getInstance().drawRotateText(key,mKeyLabelX + mRectWidth + rectOffset,mKeyLabelY,0,canvas,getLegendLabelPaint());
    mKeyLabelX+=mRectWidth + strWidth + 2 * rectOffset;
  }
}
